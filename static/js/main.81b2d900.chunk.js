(this["webpackJsonphacker-news-search"]=this["webpackJsonphacker-news-search"]||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(4),o=a.n(s),l=a(1),i=a(5),c=a(6),u=a(9),m=a(8),p=function(e){var t=e.onChange,a=e.value;return r.a.createElement("div",{className:"input-search-box"},r.a.createElement("input",{name:"query",onChange:t,type:"text",value:a}))},g=function(){return r.a.createElement(S.Consumer,null,(function(e){var t=e.onChange,a=e.value;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo-wrapper"},r.a.createElement("img",{alt:"",src:"https://hn.algolia.com/assets/logo-hn-search.png"}),r.a.createElement("span",{className:"logo-name"},"Search",r.a.createElement("br",null),"Hacker News")),r.a.createElement(p,{onChange:t,value:a}))}))},h=a(2),d=a.n(h),f=function(){return r.a.createElement(S.Consumer,null,(function(e){var t=e.showMenuHandler,a=e.dropDownHandler,n=e.updateTagFilter,s=e.updateSortFilter,o=e.updateNumFilter,l=e.showCalender,i=e.menu1,c=e.menu2,u=e.menu3,m=e.searchDropDownValue,p=e.byDropDownValue,g=e.forDropDownValue,h=e.customDateRange,d=e.fromDate,f=e.toDate,b=e.onChange,D=e.showCalenderHandler,E=e.nbHits,v=e.processingTimeMS,w=e.page;return r.a.createElement("div",{className:"search-panel"},r.a.createElement("div",null,r.a.createElement("span",null,"Search"),r.a.createElement("button",{className:"mainButton",onClick:function(){return t("menu1")}},m),i?r.a.createElement("div",{className:"menu",ref:function(e){a(e)}},r.a.createElement("button",{className:"dropDownBtn",name:"searchDropDownValue",value:"All",onClick:function(e){return n(e,"(story,comment,poll)")}},"All"),r.a.createElement("button",{className:"dropDownBtn",name:"searchDropDownValue",value:"Stories",onClick:function(e){return n(e,"story")}},"Stories"),r.a.createElement("button",{className:"dropDownBtn",name:"searchDropDownValue",value:"Comments",onClick:function(e){return n(e,"comment")}},"Comments")):null),r.a.createElement("div",null,r.a.createElement("span",null,"by"),r.a.createElement("button",{className:"mainButton",onClick:function(){return t("menu2")}},p),c?r.a.createElement("div",{className:"menu",ref:function(e){a(e)}},r.a.createElement("button",{className:"dropDownBtn",name:"byDropDownValue",value:"Popularity",onClick:function(e){return s(e,"popularity")}},"Popularity"),r.a.createElement("button",{className:"dropDownBtn",name:"byDropDownValue",value:"Date",onClick:function(e){return s(e,"date")}},"Date")):null),r.a.createElement("div",null,r.a.createElement("span",null,"for"),r.a.createElement("button",{className:"mainButton",onClick:function(){return t("menu3")}},g),u?r.a.createElement("div",{className:"menu",ref:function(e){a(e)}},r.a.createElement("button",{className:"dropDownBtn",name:"forDropDownValue",value:"All-time",onClick:function(e){return o(e,"all-time")}},"All-Time"),r.a.createElement("button",{className:"dropDownBtn",name:"forDropDownValue",value:"Last 24h",onClick:function(e){return o(e,"last-24-hours")}},"Last 24h"),r.a.createElement("button",{className:"dropDownBtn",name:"forDropDownValue",value:"Past Week",onClick:function(e){return o(e,"past-week")}},"Past Week"),r.a.createElement("button",{className:"dropDownBtn",name:"forDropDownValue",value:"Past Month",onClick:function(e){return o(e,"past-month")}},"Past Month"),r.a.createElement("button",{className:"dropDownBtn",name:"forDropDownValue",value:"Past Year",onClick:function(e){return o(e,"past-year")}},"Past Year"),r.a.createElement("button",{className:"dropDownBtn",name:"forDropDownValue",value:"Custom Range",onClick:function(e){return D(e)}},"Custom Range")):null,l?r.a.createElement("div",{className:"custom-form"},r.a.createElement("input",{name:"fromDate",type:"text",value:d,onChange:b}),r.a.createElement("input",{name:"toDate",type:"text",value:f,onChange:b}),r.a.createElement("button",{onClick:function(){return h()}},"Submit")):null),r.a.createElement("div",{className:"search-panel-result"},0!==w?r.a.createElement("span",null,"Page\xa0",w," of \xa0",E,"\xa0results (",v/1e3,"\xa0seconds)"):r.a.createElement("span",null,E,"\xa0results (",v/1e3,"\xa0seconds)")))}))},b=function(e){var t=e.time,a=d()(t).fromNow();return r.a.createElement("span",{className:"time"},a)},D=function(e){var t=e.post;e.index;return function(e,t,a){return e&&t?r.a.createElement("div",{className:"post-list-item"},r.a.createElement("div",{className:"post-title-panel"},r.a.createElement("a",{className:"post-title",href:a.url},a.title)),r.a.createElement("div",{className:"post-data-line"},r.a.createElement("span",{className:"post-score"},a.points,"\xa0points"),r.a.createElement("span",{className:"post-user"},a.author),r.a.createElement(b,{time:a.created_at}),r.a.createElement("span",{className:"post-comments"},a.num_comments," \xa0comments"),r.a.createElement("span",{className:"post-url"},r.a.createElement("a",{href:a.url},a.url)))):r.a.createElement("div",{className:"post-list-item"},r.a.createElement("div",{className:"post-title-panel"},r.a.createElement("a",{className:"post-title",href:a.url},a.story_title)),r.a.createElement("div",{className:"post-data-line"},r.a.createElement("span",{className:"post-score"},a.points,"&nbsppoints"),r.a.createElement("span",{className:"post-user"},a.author),r.a.createElement(b,{time:a.created_at}),r.a.createElement("span",{className:"post-number-comments"},a.num_comments," \xa0comments")),r.a.createElement("div",{dangerouslySetInnerHTML:(n=a.comment_text,{__html:n})}));var n}(t.title,t.url,t)},E=function(){return r.a.createElement(S.Consumer,null,(function(e){var t=e.posts_data;return r.a.createElement("div",{className:"post-list"},t.map((function(e,t){return r.a.createElement(D,{key:e.objectID,index:t,post:e})})))}))},v=a(7),w=a.n(v),C=function(e){if(!e.ok)throw Error(e.statusText);return e},N=function(e,t,a,n,r){return"popularity"===a?fetch("https://hn.algolia.com/api/v1/search?query="+e+"&tags="+t+"&numericFilters="+n+"&page="+r).then(C).then((function(e){return e.json()})).catch((function(e){return console.log(e)})):fetch("https://hn.algolia.com/api/v1/search_by_date?query="+e+"&tags="+t+"&numericFilters="+n+"&page="+r).then(C).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},S=(a(17),r.a.createContext()),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={menu1:!1,menu2:!1,menu3:!1,showCalender:!1,query:"",data:[],searchDropDownValue:"Stories",byDropDownValue:"Popularity",forDropDownValue:"All Time",tagFilter:"(story,comment,poll)",sortFilter:"popularity",numericFilter:"created_at_i>1171843200",fromDate:"",toDate:"",nbHits:"",processingTimeMS:"",page:0,nbPages:0,active:0},e.onChange=function(t){e.setState(Object(l.a)({},t.target.name,t.target.value),(function(){N(e.state.query,e.state.tagFilter,e.state.sortFilter,e.state.numericFilter,e.state.page).then((function(t){return e.setState({data:t.hits,nbHits:t.nbHits,processingTimeMS:t.processingTimeMS,page:t.page,nbPages:t.nbPages})}))}))},e.pageCountHandler=function(t){e.setState({page:t.selected,active:t.selected},(function(){N(e.state.query,e.state.tagFilter,e.state.sortFilter,e.state.numericFilter,e.state.page).then((function(t){return e.setState({data:t.hits,nbHits:t.nbHits,processingTimeMS:t.processingTimeMS,page:t.page,nbPages:t.nbPages})}))}))},e.updateTagFilter=function(t,a){var n;e.setState((n={},Object(l.a)(n,t.target.name,t.target.value),Object(l.a)(n,"tagFilter",a),n),(function(){N(e.state.query,e.state.tagFilter,e.state.sortFilter,e.state.numericFilter,e.state.page).then((function(t){return e.setState({data:t.hits,nbHits:t.nbHits,processingTimeMS:t.processingTimeMS,page:t.page,nbPages:t.nbPages})}))}))},e.updateSortFilter=function(t,a){var n;e.setState((n={},Object(l.a)(n,t.target.name,t.target.value),Object(l.a)(n,"sortFilter",a),n),(function(){N(e.state.query,e.state.tagFilter,e.state.sortFilter,e.state.numericFilter,e.state.page).then((function(t){return e.setState({data:t.hits,nbHits:t.nbHits,processingTimeMS:t.processingTimeMS,page:t.page,nbPages:t.nbPages})}))}))},e.updateNumFilter=function(t,a){var n,r,s={"all-time":1171843200,"last-24-hours":1,"past-week":7,"past-month":30,"past-year":365},o=Math.floor(Date.now()/1e3)-24*s[a]*60*60;"all-time"!==a?e.setState((n={},Object(l.a)(n,t.target.name,t.target.value),Object(l.a)(n,"numericFilter","created_at_i>"+o),n),(function(){N(e.state.query,e.state.tagFilter,e.state.sortFilter,e.state.numericFilter,e.state.page).then((function(t){return e.setState({data:t.hits,nbHits:t.nbHits,processingTimeMS:t.processingTimeMS,page:t.page,nbPages:t.nbPages})}))})):e.setState((r={},Object(l.a)(r,t.target.name,t.target.value),Object(l.a)(r,"numericFilter","created_at_i>"+s[a]),r),(function(){N(e.state.query,e.state.tagFilter,e.state.sortFilter,e.state.numericFilter,e.state.page).then((function(t){return e.setState({data:t.hits,nbHits:t.nbHits,processingTimeMS:t.processingTimeMS,page:t.page,nbPages:t.nbPages})}))}))},e.dropDownHandler=function(t){e.dropDownElement=t},e.showMenuHandler=function(t){e.setState(Object(l.a)({},t,!0),(function(){document.addEventListener("click",e.closeMenu)}))},e.closeMenu=function(t){e.dropDownElement.contains(t.target)||e.setState({menu1:!1,menu2:!1,menu3:!1},(function(){document.removeEventListener("click",e.closeMenu)}))},e.showCalenderHandler=function(t){e.setState(Object(l.a)({showCalender:!0},t.target.name,t.target.value),(function(){document.addEventListener("click",e.closeMenu)}))},e.closeCalender=function(t){e.dropDownElement.contains(t.target)||e.setState({showCalender:!1},(function(){document.removeEventListener("click",e.closeCalender)}))},e.customDateRange=function(){var t=Math.floor(d()(e.state.fromDate).format("X")),a=Math.floor(d()(e.state.toDate).format("X"));e.setState({numericFilter:"created_at_i>"+t+",created_at_i<"+a},(function(){N(e.state.query,e.state.tagFilter,e.state.sortFilter,e.state.numericFilter,e.state.page).then((function(t){return e.setState({data:t.hits,nbHits:t.nbHits,processingTimeMS:t.processingTimeMS,page:t.page,nbPages:t.nbPages})}))}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;N(this.state.query,this.state.tagFilter,this.state.sortFilter,this.state.numericFilter,this.state.page).then((function(t){return e.setState({data:t.hits,nbHits:t.nbHits,processingTimeMS:t.processingTimeMS,page:t.page,nbPages:t.nbPages})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(S.Provider,{value:{value:this.state.query,showMenuHandler:this.showMenuHandler,dropDownHandler:this.dropDownHandler,updateTagFilter:this.updateTagFilter,updateSortFilter:this.updateSortFilter,updateNumFilter:this.updateNumFilter,showCalender:this.state.showCalender,menu1:this.state.menu1,menu2:this.state.menu2,menu3:this.state.menu3,searchDropDownValue:this.state.searchDropDownValue,byDropDownValue:this.state.byDropDownValue,forDropDownValue:this.state.forDropDownValue,customDateRange:this.customDateRange,fromDate:this.state.fromDate,toDate:this.state.toDate,onChange:this.onChange,showCalenderHandler:this.showCalenderHandler,nbHits:this.state.nbHits,processingTimeMS:this.state.processingTimeMS,page:this.state.page,posts_data:this.state.data}},r.a.createElement(g,null),r.a.createElement(f,null),r.a.createElement(E,null),r.a.createElement(w.a,{previousLabel:"<<",nextLabel:">>",breakLabel:"...",breakClassName:"break-me",pageCount:this.state.nbPages,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:this.pageCountHandler,containerClassName:"pagination",pageLinkClassName:"page-link",activeClassName:"active"})))}}]),a}(n.Component);o.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.81b2d900.chunk.js.map